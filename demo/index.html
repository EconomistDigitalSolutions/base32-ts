<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@niyari/base32-ts</title>
</head>

<body>
    <a href="https://github.com/niyari/base32-ts">Repository</a><br><a
        href="https://niyari.github.io/base32-ts/">README</a><br>
    <section>
        <div>
            <p>Input value <span id="in_error" style="color: red;"></span></p>
            <textarea type="text" style="width: 50%" placeholder="input" id="input" rows="4"></textarea>
        </div>
    </section>
    <hr>
    <section>
        <div>
            <p>Base32</p>
            <textarea type="text" style="width: 25%" placeholder="Encode" id="base32_e" rows="4"></textarea>
            <textarea type="text" style="width: 25%" placeholder="Decode" id="base32_d" rows="4"></textarea>
        </div>
    </section>

    <section>
        <div>
            <p>Base32_HEX</p>
            <textarea type="text" style="width: 25%" placeholder="Encode" id="hex_e" rows="4"></textarea>
            <textarea type="text" style="width: 25%" placeholder="Decode" id="hex_d" rows="4"></textarea>
        </div>
    </section>

    <section>
        <div>
            <p>Clockwork Base32</p>
            <textarea type="text" style="width: 25%" placeholder="Encode" id="cw_e" rows="4"></textarea>
            <textarea type="text" style="width: 25%" placeholder="Decode" id="cw_d" rows="4"></textarea>
        </div>
    </section>
    <hr>
    <section>
        <div>
            <p>Crockford</p>
            <p>input Value <span id="cf_error" style="color: red;"></span></p>
            <input type="tel" style="width: 50%" placeholder="number" id="input_cf">
        </div>
    </section>
    <hr>
    <section>
        <div>
            <textarea type="text" style="width: 25%" placeholder="Encode" id="cf_e" rows="4"></textarea>
            <textarea type="text" style="width: 25%" placeholder="Decode" id="cf_d" rows="4"></textarea>
        </div>
    </section>

    <script>
        const in_error = document.getElementById("in_error");
        try {
            let testbigint = BigInt(1);
        } catch (error) {
            in_error.textContent = 'ERROR: Require : ECMAScript 2020+';
        }

    </script>

    <script type="module">
        import { Base32 } from "../dist/base32.js";
        window.Base32 = Base32;

        window.addEventListener("DOMContentLoaded", () => {
            const input = document.getElementById("input");
            const input_cf = document.getElementById("input_cf");
            const cf_error = document.getElementById("cf_error");
            const base32 = new Base32();
            const base32_hex = new Base32({ variant: 'hex' });
            const base32_clockwork = new Base32({ variant: 'clockwork' });
            const base32_crockford = new Base32({ variant: 'crockford' });
            const base32_e = document.getElementById("base32_e");
            const base32_d = document.getElementById("base32_d");
            const hex_e = document.getElementById("hex_e");
            const hex_d = document.getElementById("hex_d");
            const cw_e = document.getElementById("cw_e");
            const cw_d = document.getElementById("cw_d");
            const cf_e = document.getElementById("cf_e");
            const cf_d = document.getElementById("cf_d");


            input.addEventListener('change', (e) => {
                cf_error.textContent = '';
                base32_e.value = base32.encode(input.value);
                base32_d.value = base32.decode(base32_e.value);

                hex_e.value = base32_hex.encode(input.value);
                hex_d.value = base32_hex.decode(hex_e.value);

                cw_e.value = base32_clockwork.encode(input.value);
                cw_d.value = base32_clockwork.decode(cw_e.value);
            });
            input_cf.addEventListener('change', (e) => {
                cf_error.textContent = '';
                try {
                    let cf_input = BigInt(input_cf.value);
                    let ret_cf = base32_crockford.encode(cf_input);
                    let lasterror = base32_crockford.lasterror();
                    if (!lasterror.isError) {
                        cf_e.value = ret_cf;
                        cf_d.value = base32_crockford.decode(cf_e.value);
                        cf_d.value += ' (' + BigInt(cf_d.value) + ')';

                    } else {
                        cf_e.value = '';
                        cf_d.value = '';
                        cf_error.textContent = lasterror.message;//Invalid data: input number.
                    }

                } catch (error) {
                    cf_error.textContent = 'Invalid data: input number.'
                    cf_e.value = '';
                    cf_d.value = '';

                }
            });


        }, false);
    </script>
</body>

</html>